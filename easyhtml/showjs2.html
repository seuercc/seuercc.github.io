<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Window 非默认对象及方法查看器</title>
    <style>
        /* 极简核心样式，确保美观且不冗余 */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: "Microsoft YaHei", Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
            background: #f5f7fa;
            color: #333;
        }
        .header {
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #4299e1;
        }
        .header h1 {
            font-size: 22px;
            color: #2d3748;
            margin-bottom: 8px;
        }
        .header p {
            color: #718096;
            font-size: 14px;
        }
        /* 对象名称样式 */
        .obj-item {
            margin: 25px 0;
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .obj-name {
            font-size: 16px;
            font-weight: 600;
            color: #2b6cb0;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }
        .obj-name::before {
            content: "●";
            color: #4299e1;
            margin-right: 8px;
            font-size: 12px;
        }
        /* 方法/属性样式 */
        .method-list {
            margin-left: 20px;
        }
        .method-item {
            font-size: 14px;
            margin: 6px 0;
            padding: 4px 8px;
            border-radius: 4px;
            background: #f8f9fa;
        }
        .type-tag {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 12px;
            color: white;
            margin-right: 10px;
            font-weight: normal;
        }
        /* 类型配色（直观区分） */
        .type-function { background: #9f7aea; }
        .type-object { background: #38b2ac; }
        .type-string { background: #48bb78; }
        .type-number { background: #ed8936; }
        .type-boolean { background: #e53e3e; }
        .type-undefined { background: #718096; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Window 非默认对象及方法查看器</h1>
        <p>自动过滤系统默认对象，仅展示新增对象及其属性/方法</p>
    </div>

    <div id="result-container"></div>

    <script>
        // 1. 定义 window 系统默认对象列表（全面覆盖主流浏览器默认属性）
        const defaultWindowProps = [
            // 核心对象/属性
            "postMessage", "blur", "focus", "close", "parent", "opener", "top", "length", 
            "frames", "closed", "location", "self", "window", "document", "name", "customElements",
            "history", "locationbar", "menubar", "personalbar", "scrollbars", "statusbar", "toolbar",
            "status", "frameElement", "navigator", "origin", "external", "screen", "innerWidth",
            "innerHeight", "scrollX", "pageXOffset", "scrollY", "pageYOffset", "visualViewport",
            "screenX", "screenY", "outerWidth", "outerHeight", "devicePixelRatio", "clientInformation",
            "screenLeft", "screenTop", "defaultStatus", "defaultstatus", "styleMedia",
            
            // 事件处理函数
            "onanimationend", "onanimationiteration", "onanimationstart", "onsearch", "ontransitionend",
            "onwebkitanimationend", "onwebkitanimationiteration", "onwebkitanimationstart", "onwebkittransitionend",
            "isSecureContext", "onabort", "onblur", "oncancel", "oncanplay", "oncanplaythrough", "onchange",
            "onclick", "onclose", "oncontextmenu", "oncuechange", "ondblclick", "ondrag", "ondragend",
            "ondragenter", "ondragleave", "ondragover", "ondragstart", "ondrop", "ondurationchange",
            "onemptied", "onended", "onerror", "onfocus", "oninput", "oninvalid", "onkeydown",
            "onkeypress", "onkeyup", "onload", "onloadeddata", "onloadedmetadata", "onloadstart",
            "onmousedown", "onmouseenter", "onmouseleave", "onmousemove", "onmouseout", "onmouseover",
            "onmouseup", "onmousewheel", "onpause", "onplay", "onplaying", "onprogress", "onratechange",
            "onreset", "onresize", "onscroll", "onseeked", "onseeking", "onselect", "onstalled",
            "onsubmit", "onsuspend", "ontimeupdate", "ontoggle", "onvolumechange", "onwaiting", "onwheel",
            "onauxclick", "ongotpointercapture", "onlostpointercapture", "onpointerdown", "onpointermove",
            "onpointerup", "onpointercancel", "onpointerover", "onpointerout", "onpointerenter", "onpointerleave",
            "onselectstart", "onselectionchange", "onafterprint", "onbeforeprint", "onbeforeunload",
            "onhashchange", "onlanguagechange", "onmessage", "onmessageerror", "onoffline", "ononline",
            "onpagehide", "onpageshow", "onpopstate", "onrejectionhandled", "onstorage", "onunhandledrejection",
            "onunload",
            
            // 方法
            "performance", "stop", "open", "alert", "confirm", "prompt", "print", "queueMicrotask",
            "requestAnimationFrame", "cancelAnimationFrame", "captureEvents", "releaseEvents",
            "requestIdleCallback", "cancelIdleCallback", "getComputedStyle", "matchMedia", "moveTo",
            "moveBy", "resizeTo", "resizeBy", "scroll", "scrollTo", "scrollBy", "getSelection", "find",
            "webkitRequestAnimationFrame", "webkitCancelAnimationFrame", "fetch", "btoa", "atob",
            "setTimeout", "clearTimeout", "setInterval", "clearInterval", "createImageBitmap",
            
            // 其他系统属性
            "onappinstalled", "onbeforeinstallprompt", "crypto", "ondevicemotion", "ondeviceorientation",
            "ondeviceorientationabsolute", "indexedDB", "webkitStorageInfo", "sessionStorage", "localStorage",
            "orientation", "onorientationchange", "openDatabase", "ontouchcancel", "ontouchend", "ontouchmove",
            "ontouchstart", "attr_list", "attr", "obj", "TEMPORARY", "PERSISTENT", "addEventListener",
            "removeEventListener", "dispatchEvent", "navigation", "trustedTypes", "scheduler", "chrome",
            "caches", "cookieStore", "launchQueue", "sharedStorage", "documentPictureInPicture",
            "speechSynthesis", "webpackChunk", "Turbo", "litHtmlVersions", "event", "onbeforexrselect",
            "onbeforeinput", "onbeforematch", "onbeforetoggle", "oncontentvisibilityautostatechange",
            "oncontextlost", "oncontextrestored", "onformdata", "onsecuritypolicyviolation", "onslotchange",
            "onpointerrawupdate", "ontransitionrun", "ontransitionstart", "ontransitioncancel",
            "crossOriginIsolated", "reportError", "structuredClone", "getScreenDetails", "queryLocalFonts",
            "showDirectoryPicker", "showOpenFilePicker", "showSaveFilePicker", "originAgentCluster",
            "onpageswap", "onpagereveal", "credentialless", "fence", "onscrollend", "onscrollsnapchange",
            "onscrollsnapchanging", "webkitRequestFileSystem", "webkitResolveLocalFileSystemURL"
        ];

        // 2. 过滤出非默认对象
        const customObjects = [];
        for (const key in window) {
            // 排除默认属性、Symbol属性、不可枚举属性
            if (
                !defaultWindowProps.includes(key) && 
                typeof key === "string" && 
                Object.prototype.hasOwnProperty.call(window, key)
            ) {
                customObjects.push(key);
            }
        }

        // 3. 构建展示HTML
        const container = document.getElementById("result-container");
        let html = "";

        // 显示统计信息
        html += `<div class="header">
                    <p>共找到 <strong style="color:#4299e1">${customObjects.length}</strong> 个非默认对象</p>
                </div>`;

        // 遍历非默认对象，展示其属性和方法
        customObjects.forEach(objName => {
            const obj = window[objName];
            html += `<div class="obj-item">
                        <div class="obj-name">${objName}</div>
                        <div class="method-list">`;

            // 遍历对象的属性/方法
            for (const prop in obj) {
                if (Object.prototype.hasOwnProperty.call(obj, prop)) {
                    const propType = typeof obj[prop];
                    const typeClass = `type-${propType}`;
                    html += `<div class="method-item">
                                <span class="type-tag ${typeClass}">${propType}</span>
                                ${prop}
                            </div>`;
                }
            }

            html += `</div></div>`;
        });

        // 4. 渲染到页面（无默认对象时显示提示）
        container.innerHTML = customObjects.length > 0 ? html : 
            `<div style="text-align:center; padding:50px; color:#718096">
                未检测到非默认对象
            </div>`;
    </script>
</body>
</html>
