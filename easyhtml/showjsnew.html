<html>
<head>
<!-- 仅新增少量核心样式，不冗余 -->
<style>
/* 基础排版优化：解决换行、间距问题 */
body {
  word-wrap: break-word;
  font-family: Arial, sans-serif; /* 清晰字体 */
  line-height: 1.6; /* 行高优化，提升可读性 */
  padding: 20px; /* 内边距，避免贴边 */
  background: #f8f9fa; /* 浅背景，减轻视觉疲劳 */
}
/* 标题样式：突出统计信息 */
.result-title {
  color: #2d3748;
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 1px solid #dee2e6; /* 下划线分隔 */
}
/* 对象名称样式：突出显示 */
.obj-name {
  color: #2b6cb0;
  font-weight: 600;
  margin: 15px 0 8px;
}
/* 属性样式：缩进+区分类型 */
.obj-prop {
  margin-left: 25px; /* 缩进，层级清晰 */
  color: #4a5568;
}
/* 类型标签：用颜色区分类型，更直观 */
.type-tag {
  display: inline-block;
  padding: 1px 6px;
  border-radius: 3px;
  font-size: 12px;
  color: white;
  margin-right: 8px;
}
/* 常见类型配色 */
.type-function { background: #9f7aea; } /* 函数：紫色 */
.type-object { background: #38b2ac; }  /* 对象：青色 */
.type-string { background: #48bb78; }  /* 字符串：绿色 */
.type-number { background: #ed8936; }  /* 数字：橙色 */
.type-boolean { background: #e53e3e; } /* 布尔：红色 */
</style>
</head>
<body>
<script>
// 将window自带的方法都过滤掉。如果WebView加载后列出了对象，则均是WebView自身添加的对象
var qjd_browser = ["postMessage","blur","focus","close","parent","opener","top","length","frames","closed","location","self","window","document","name","customElements","history","locationbar","menubar","personalbar","scrollbars","statusbar","toolbar","status","frameElement","navigator","origin","external","screen","innerWidth","innerHeight","scrollX","pageXOffset","scrollY","pageYOffset","visualViewport","screenX","screenY","outerWidth","outerHeight","devicePixelRatio","clientInformation","screenLeft","screenTop","defaultStatus","defaultstatus","styleMedia","onanimationend","onanimationiteration","onanimationstart","onsearch","ontransitionend","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","isSecureContext","onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwheel","onauxclick","ongotpointercapture","onlostpointercapture","onpointerdown","onpointermove","onpointerup","onpointercancel","onpointerover","onpointerout","onpointerenter","onpointerleave","onselectstart","onselectionchange","onafterprint","onbeforeprint","onbeforeunload","onhashchange","onlanguagechange","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onstorage","onunhandledrejection","onunload","performance","stop","open","alert","confirm","prompt","print","queueMicrotask","requestAnimationFrame","cancelAnimationFrame","captureEvents","releaseEvents","requestIdleCallback","cancelIdleCallback","getComputedStyle","matchMedia","moveTo","moveBy","resizeTo","resizeBy","scroll","scrollTo","scrollBy","getSelection","find","webkitRequestAnimationFrame","webkitCancelAnimationFrame","fetch","btoa","atob","setTimeout","clearTimeout","setInterval","clearInterval","createImageBitmap","onappinstalled","onbeforeinstallprompt","crypto","ondevicemotion","ondeviceorientation","ondeviceorientationabsolute","indexedDB","webkitStorageInfo","sessionStorage","localStorage","orientation","onorientationchange","openDatabase","ontouchcancel","ontouchend","ontouchmove","ontouchstart","attr_list","attr","obj","TEMPORARY","PERSISTENT","addEventListener","removeEventListener","dispatchEvent",
  "window","self","document","location","customElements","history","navigation","locationbar","menubar","personalbar","scrollbars","statusbar","toolbar","frames","top","parent","navigator","external","screen","visualViewport","clientInformation","styleMedia","trustedTypes","performance","crypto","indexedDB","sessionStorage","localStorage","scheduler","chrome","caches","cookieStore","launchQueue","sharedStorage","documentPictureInPicture","speechSynthesis","webpackChunk","Turbo","litHtmlVersions","event","onbeforexrselect","onbeforeinput","onbeforematch","onbeforetoggle","oncontentvisibilityautostatechange","oncontextlost","oncontextrestored","onformdata","onsecuritypolicyviolation","onslotchange","onpointerrawupdate","ontransitionrun","ontransitionstart","ontransitioncancel","crossOriginIsolated","reportError","structuredClone","getScreenDetails","queryLocalFonts","showDirectoryPicker","showOpenFilePicker","showSaveFilePicker","originAgentCluster","onpageswap","onpagereveal","credentialless","fence","onscrollend","onscrollsnapchange","onscrollsnapchanging","webkitRequestFileSystem","webkitResolveLocalFileSystemURL","result","qjd_browser","qjd_attr"];

var qjd_attr= [];
for(var obj in window){
  if(qjd_browser.indexOf(obj) == -1){
    qjd_attr.push(obj);
  }
}

// 构建HTML结构（替换原字符串拼接，用标签实现样式）
var result = '';
// 1. 统计标题
result += '<div class="result-title">' + qjd_attr.length + ' 个WebView新增对象：' + qjd_attr.toString() + '</div>';

// 2. 遍历对象和属性
for(var i in qjd_attr){
  var objName = qjd_attr[i];
  var obj = window[objName];
  // 对象名称（带样式）
  result += '<div class="obj-name">' + objName + '：</div>';
  // 对象属性（带类型标签+缩进）
  for(var j in obj){
    var propType = typeof obj[j];
    // 根据类型选择对应的样式类
    var typeClass = 'type-' + propType;
    // 属性行：类型标签 + 属性名
    result += '<div class="obj-prop">' +
      '<span class="type-tag ' + typeClass + '">' + propType + '</span>' +
      j +
      '</div>';
  }
}

// 替换document.write为DOM插入（避免异步脚本错误）
document.body.innerHTML = result;
</script>
</body>
</html>
