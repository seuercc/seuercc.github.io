<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        body {
            font-size: 35px;
            word-wrap: break-word;
        }
    </style>
    <title>Browser APK JSBridge test</title>
</head>
<body>
    <div id="getoaid">
        <a href="petalmaps://textSearch?text=charging&SearchCenter=&sessionId=from_calyx_search&utm_source=com.huawei.maps.auto.app&package=ecarx.naviservice&isDirect=false">花瓣地图deeplink</a><br>
        <a href='hiapp://com.huawei.appmarket?activityName=activityUri|appdetail.activity&params={"params":[{"name":"uri","type":"String","value":"app|C10280365"}]}&channelId=123412'>应用市场deeplink</a><br>
        <a href='higame://com.huawei.gamebox?activityName=activityUri|appdetail.activity&params={"params":[{"name":"uri","type":"String","value":"app|C10280365"}]}&thirdId=123412'>游戏中心deeplink</a><br>
        <a href="data:text/html,%3Cscript%3Ewindow.location.href%3D'hiapp%3A//com.huawei.appmarket%3FactivityName%3DactivityUri%7Cappdetail.activity%26params%3D%7B%22params%22%3A%5B%7B%22name%22%3A%22uri%22%2C%22type%22%3A%22String%22%2C%22value%22%3A%22app%7CC10280365%22%7D%5D%7D%26channelId%3D123412'%3C/script%3E">data协议打开应用市场</a><br>
        <a href="data:text/html,%3Cscript%3Ewindow.open('hiapp%3A//com.huawei.appmarket%3FactivityName%3DactivityUri%7Cappdetail.activity%26params%3D%7B%22params%22%3A%5B%7B%22name%22%3A%22uri%22%2C%22type%22%3A%22String%22%2C%22value%22%3A%22app%7CC10280365%22%7D%5D%7D%26channelId%3D123412')%3C/script%3E">data协议 open打开应用市场</a><br>
  
    </div>

<button id="ppsconsentQuery">ppsconsentQuery</button>
<br>
<button id="ppsDownloadStart">pps.download.start</button>
<br>
    
    <script>
        const resultContainer = document.createElement('div');
        document.body.appendChild(resultContainer);

        function successcallback ( oaid){ resultContainer.innerHTML += `oaid: ${oaid}<br>`}
        function failcallback (  error ){ resultContainer.innerHTML += `oaid error: ${error}<br>`}
        
        if (typeof HwDevice !== 'undefined') {
            HwDevice.getOaid('successcallback','failcallback');
        }

        
        if (typeof _hwbrNative !== 'undefined') {
            try {
                const ret = _hwbrNative.invokeSync('account', 'getUserInfo', []);
                resultContainer.innerHTML += `result 1: ${JSON.stringify(ret)}<br>`;
            } catch (e) {
                resultContainer.innerHTML += `userinfo error: ${e.message}`;
            }
        }

               
        // if (window._HwJSBridge && typeof window._HwJSBridge['invoke'] === 'function') {
        //     var content = {};
        //     var data = {'contentId': JSON.stringify(content), 'url': 'https://www.baidu.com', 'webid':'deadbeef'};
        //     ret = window._HwJSBridge.invoke("pps.consent.query",JSON.stringify(data))
        //     resultContainer.innerHTML += `_HwJSBridge: ${JSON.stringify(ret)}<br>`;
        // }else{
        //      resultContainer.innerHTML += `no _HwJSBridge <br> `;
        // }



        
      
        if (window.PageLoadDetector && typeof window.PageLoadDetector['openCellularNetwork'] === 'function') {
            window.PageLoadDetector.openCellularNetwork()
        }else{
             resultContainer.innerHTML += `no PageLoadDetector <br> `;
        }

        function successcallback2 (id,content){ resultContainer.innerHTML += `translateLanguage: ${content}<br>`}
        
        if (window.com_huawei_browser_translate_obj && typeof window.com_huawei_browser_translate_obj['translateLanguage'] === 'function') {
            window.com_huawei_browser_translate_obj.translateLanguage(111,['hello','你是谁','我是你爸爸'],'LANG_AUTO','successcallback2')
        }else{
             resultContainer.innerHTML += `no com_huawei_browser_translate_obj <br> `;
        }
        
        if (window.hwJSNetwork && typeof window.hwJSNetwork['sendData'] === 'function') {
            window.hwJSNetwork.sendData('https://www.baidu.com','GET','','','successcallback2')
        }else{
             resultContainer.innerHTML += `no hwJSNetwork <br> `;
        }
        
        if (window.hwbrErrorPageMode && typeof window.hwbrErrorPageMode['reportErrorPage'] === 'function') {
            window.hwbrErrorPageMode.reportErrorPage('https://www.baidu.com',0)
        }else{
             resultContainer.innerHTML += `no hwbrErrorPageMode <br> `;
        }
        
        if (window.com_huawei_browser_translate_obj && typeof window.com_huawei_browser_translate_obj['log'] === 'function') {
            window.com_huawei_browser_translate_obj.log('ccc : ' + resultContainer.innerHTML )
        }else{
             resultContainer.innerHTML += `no com_huawei_browser_translate_obj <br> `;
        }


    document.getElementById('ppsconsentQuery').addEventListener('click', consentQuery); 
    function successcallback3 (result){ resultContainer.innerHTML += `_HwJSBridge : ${JSON.stringify(result)}<br>`}            
    function consentQuery() {
        if (window._HwJSBridge && typeof window._HwJSBridge['invokeAsync'] === 'function') {
                var content = {};
                var data = {'content': JSON.stringify(content), 'url': 'https://www.baidu.com', 'cid':'deadbeef'};
                window._HwJSBridge.invokeAsync('pps.consent.query',  JSON.stringify(data), 'successcallback3');
            }
       }
        
    document.getElementById('ppsDownloadStart').addEventListener('click', ppsDownloadStart);
    function ppsDownloadStart() {
        if (window._HwJSBridge && typeof window._HwJSBridge['invokeAsync'] === 'function') {
            var content = {
                'contentId': '293606617',
                'slotid': 'l1m43f98su',
                'apiVer': '2',
                'adId': 'ee42b58c-5ff4-4a1b-a161-18ec68f410dc',
                'showId': 'ec24b7e8-cc57-45d6-96b9-8b71250164bd',
                'userId': '22222'
            };
            var data = {'content': JSON.stringify(content), 'url': 'https://www.baidu.com', 'cid': 'deadbeef'};
            window._HwJSBridge.invokeAsync('pps.event.click', JSON.stringify(data), 'successcallback3');
        }
    }
        
    </script>
</body>
</html>
